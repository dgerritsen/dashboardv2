<div class="animated fadeIn">
  <div class="row" *ngIf="most">
    <div class="col-sm-4">
      <div class="card">
        <div class="card-body p-3 d-flex align-items-center">
          <i class="fa fa-thumbs-o-up bg-success p-3 font-2xl mr-3"></i>
          <div>
            <div class="text-value-sm text-success">{{ most.picks.Name }}</div>
            <div class="text-muted text-uppercase font-weight-bold small">Meeste Picks ({{ most.picks.amount }})</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card">
        <div class="card-body p-3 d-flex align-items-center">
          <i class="fa fa-star-o bg-primary p-3 font-2xl mr-3"></i>
          <div>
            <div class="text-value-sm text-primary">{{ most.orders.Name }}</div>
            <div class="text-muted text-uppercase font-weight-bold small">Meeste Orders ({{ most.orders.amount }})</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card">
        <div class="card-body p-3 d-flex align-items-center">
          <i class="fa fa-line-chart bg-warning p-3 font-2xl mr-3"></i>
          <div>
            <div class="text-value-sm text-warning">{{ most.ratio.Name }}</div>
            <div class="text-muted text-uppercase font-weight-bold small">Hoogste Ratio ({{ most.ratio.amount }})</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="graphs">
    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-primary">
          <i class="icon-user icons font-2xl d-block"></i>
          <p class="d-block ml-2 mt-3">Personeel</p>
          <div class="chart-wrapper" *ngIf="graphs">
            <canvas baseChart class="chart"
                    [datasets]="graphs.otherUsers.data"
                    [labels]="graphs.otherUsers.labels"
                    [options]="graphs.otherUsers.options"
                    [colors]="graphs.otherUsers.colors"
                    [legend]="graphs.otherUsers.legend"
                    [chartType]="graphs.otherUsers.type"></canvas>
          </div>
        </div>
        <div class="brand-card-body" *ngIf="totals">
          <div>
            <div class="text-value">{{ totals.otherUsers.picks }}</div>
            <div class="text-uppercase text-muted small">picks</div>
          </div>
          <div>
            <div class="text-value">{{ totals.otherUsers.orders }}</div>
            <div class="text-uppercase text-muted small">orders</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-warning">
          <i class="icon-chart icons font-2xl d-block"></i>
          <p class="d-block ml-2 mt-3">Totaal</p>
          <div class="chart-wrapper" *ngIf="graphs">
            <canvas baseChart class="chart"
                    [datasets]="graphs.allUsers.data"
                    [labels]="graphs.allUsers.labels"
                    [options]="graphs.allUsers.options"
                    [colors]="graphs.allUsers.colors"
                    [legend]="graphs.allUsers.legend"
                    [chartType]="graphs.allUsers.type"></canvas>
          </div>
        </div>
        <div class="brand-card-body" *ngIf="totals">
          <div>
            <div class="text-value">{{ totals.allUsers.picks }}</div>
            <div class="text-uppercase text-muted small">picks</div>
          </div>
          <div>
            <div class="text-value">{{ totals.allUsers.orders }}</div>
            <div class="text-uppercase text-muted small">orders</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-success">
          <i class="icon-social-dropbox icons font-2xl d-block"></i>
          <p class="d-block ml-2 mt-3">Crossdock</p>
          <div class="chart-wrapper" *ngIf="graphs">
            <canvas baseChart class="chart"
                    [datasets]="graphs.crossdock.data"
                    [labels]="graphs.crossdock.labels"
                    [options]="graphs.crossdock.options"
                    [colors]="graphs.crossdock.colors"
                    [legend]="graphs.crossdock.legend"
                    [chartType]="graphs.crossdock.type"></canvas>
          </div>
        </div>
        <div class="brand-card-body" *ngIf="totals">
          <div>
            <div class="text-value">{{ totals.crossdock.picks }}</div>
            <div class="text-uppercase text-muted small">picks</div>
          </div>
          <div>
            <div class="text-value">{{ totals.crossdock.orders }}</div>
            <div class="text-uppercase text-muted small">orders</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-danger">
          <i class="icon-layers icons font-2xl d-block"></i>
          <p class="d-block ml-2 mt-3">Lift</p>
          <div class="chart-wrapper" *ngIf="graphs">
            <canvas baseChart class="chart"
                    [datasets]="graphs.lift.data"
                    [labels]="graphs.lift.labels"
                    [options]="graphs.lift.options"
                    [colors]="graphs.lift.colors"
                    [legend]="graphs.lift.legend"
                    [chartType]="graphs.lift.type"></canvas>
          </div>
        </div>
        <div class="brand-card-body" *ngIf="totals">
          <div>
            <div class="text-value">{{ totals.lift.picks }}</div>
            <div class="text-uppercase text-muted small">picks</div>
          </div>
          <div>
            <div class="text-value">{{ totals.lift.orders }}</div>
            <div class="text-uppercase text-muted small">orders</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="percentageData">
    <div class="col-sm-6 col-lg-6">
      <div class="card">
        <div class="card-body">
          <div class="text-value">{{ percentageData.picksbypersonnel }}%</div>
          <div>Picks door personeel</div>
          <progressbar class="progress progress-xs my-2" [type]="percentageData.picksbypersonnel > 100 ? 'success' : percentageData.picksbypersonnel < 40 ? 'danger' : 'warning'" [value]="percentageData.picksbypersonnel" [max]="100"></progressbar>
          <small class="text-success" *ngIf="percentageData.picksbypersonnel > 50">{{ percentageData.picksbypersonnel - 50}}% meer dan gemiddeld</small>
          <small class="text-danger" *ngIf="percentageData.picksbypersonnel < 50">{{ 50 - percentageData.picksbypersonnel }}% minder dan gemiddeld</small>
          <small class="text-muted" *ngIf="percentageData.picksbypersonnel == 50">Hetzelfde als gemiddeld</small>
        </div>
      </div>
    </div>

    <div class="col-sm-6 col-lg-6">
      <div class="card" *ngIf="percentageData">
        <div class="card-body">
          <button type="button" class="btn btn-transparent text-muted p-0 float-right">
            <i class="icon-pencil icons"></i>
          </button>
          <div class="text-value">{{ percentageData.daytarget }}%</div>
          <div>Van het dagtarget</div>
          <progressbar class="progress progress-xs my-2" [type]="percentageData.daytarget > 100 ? 'success' : 'warning'" [value]="percentageData.daytarget" [max]="100"></progressbar>
          <small class="text-danger" *ngIf="percentageData.daytarget < 100">{{ 100 - percentageData.daytarget }}% tekort</small>
          <small class="text-muted" *ngIf="percentageData.daytarget == 100">Gelijk aan target</small>
          <small class="text-success" *ngIf="percentageData.daytarget > 100">{{ percentageData.daytarget - 100 }}% boven target</small>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="card card-accent-primary">
        <div class="card-header">
          Ranking
          <input type="text" id="text-input" name="pickdates" class="col-lg-2 form-control float-right" placeholder="Text">
        </div>
        <div class="card-body p-3">
          <div *ngIf="table" class="last-percentage">
            <ngx-datatable
              class="material"
              [rows]="table"
              [columns]="[{ prop: 'Name', name: 'Naam' }, { prop: 'total.picks', name: 'Picks' }, { prop: 'total.orders', name: 'Orders' }, { prop: 'ratio', name: 'P/O Ratio' }, { prop: 'percentages.picks', name: 'Percentage' }]"
              [columnMode]="'force'"
              [selectionType]="'multiClick'"
              [sorts]="[{prop: 'total.picks', dir: 'desc'}]">
            </ngx-datatable>
          </div>
          <div *ngIf="!graphs">
            Geen data in het opgegeven bereik.<br/>
            Kies rechtsboven andere datums.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="graphs">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-body">
          <div echarts style="height: 350px;" [options]="graphs.bottomtwo" *ngIf="graphs"></div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card">
        <div class="card-body">
          <div echarts style="height: 350px;" [options]="graphs.piechart" *ngIf="graphs"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="overlay loader"></div>
<div class="spinner loader sk-rotating-plane"></div>

<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
